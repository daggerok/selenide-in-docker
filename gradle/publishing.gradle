allprojects {
  apply plugin: "maven-publish"

  publishing {
    publications {
      /*
      shadow(MavenPublication) { publication ->
        project.shadow.component(publication)
      }
      */
      mavenJava(MavenPublication) {
        from components.java
      }
    }
    repositories {
      maven {
        url "$buildDir/maven-publish"
      }
    }
  }

  publish.dependsOn assemble
}
